<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>User</title>
</head>
<body>
<div th:insert="~{fragment :: header}"></div>

<form th:action="@{/users/{userId}/update(userId=${user.id})}" enctype="multipart/form-data" method="post" th:object="${user}">
  <label for="name">Name:
    <input type="text" th:field="*{name}">
  </label><br>
  <label for="lastName">LastName:
    <input id="lastName" type="text" name="lastName" th:value="*{lastName}">
  </label><br>
  <label for="username">Email:
    <input id="username" type="text" name="username" th:value="*{username}">
  </label><br>
  <label for="birthDate">BirthDate:
    <input id="birthDate" type="date" name="birthDate" th:value="*{birthDate}">
  </label><br>

  <div th:each="role : ${roles}">
    <input th:id="role" type="radio" name="role" th:value="${role}"  th:checked="${role == user.role}">
    <label th:for="${role}" th:text="${role}">Role name</label>
  </div>
  <div th:each="gender : ${genders}">
    <input th:id="gender" type="radio" name="gender" th:value="${gender}"  th:checked="${gender == user.gender}">
    <label th:for="${gender}" th:text="${gender}">Gender name</label>
  </div>

  <button type="submit">Update</button>
</form>

<form th:action="@{/users/{userId}/delete(userId=${user.id})}" th:if="${user.role.name() == 'ADMIN'}" method="post">
  <button type="submit">Remove</button>
</form>

<div th:if="${errors}">
  <p style="color: red" th:each="error : ${errors}" th:text="${error.defaultMessage}">Message</p>
</div>

</body>
</html>


/////

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Users</title>
</head>
<body>
<div th:insert="~{fragment :: header}"></div>
<form th:action="@{/users}">
  <label for="name">Name:
    <input id="name" type="text" name="name" th:value="${filter.name()}">
  </label>
  <label for="lastName">LastName:
    <input id="lastName" type="text" name="lastName" th:value="${filter.lastName()}">
  </label>
  <label for="birthDate">BirthDate:
    <input id="birthDate" type="date" name="birthDate" th:value="${filter.birthDate()}">
  </label>
  <label for="username">Email:
    <input id="username" type="text" name="username" th:value="${filter.username()}">
  </label>

  <div th:each="role : ${roles}">
    <input th:id="role" type="radio" name="role" th:value="${role}" th:checked="${role == filter.role}">
    <label th:for="${role}" th:text="${role}">Role name</label>
  </div>
  <div th:each="gender : ${genders}">
    <input th:id="gender" type="radio" name="gender" th:value="${gender}" th:checked="${role == filter.role}">
    <label th:for="${gender}" th:text="${gender}">Gender name</label>
  </div>

  <div>
    <label for="page">Page:
      <input id="page" type="number" name="page" th:value="${users.metadata.page}">
    </label>
    <label for="size">Size:
      <input id="size" type="number" name="size" th:value="${users.metadata.size}">
    </label>
  </div>

  <button type="submit">Filter</button>
</form>

<div th:each="user : ${users.content}">
  <a th:href="@{'/users/' + ${user.id}}" th:text="|${user.id}. ${user.username}|">User</a>
</div>
<div th:if="${errors}">
  <p style="color: red" th:each="err : ${errors}" th:text="${err.defaultMessage}">Message</p>
</div>
</body>
</html>

<!--//-->

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Fragment</title>
</head>
<body>
<div th:fragment="header">
  <form action="/logout" method="post">
    <button type="submit">Logout</button>
  </form>
  <div th:insert="~{fragment :: locale}"></div>
</div>

<div th:fragment="locale">
  <form action="">
    <select name="lang" onchange="this.form.submit()">
      <option></option>
      <option value="en">EN</option>
      <option value="ru">RU</option>
    </select>
  </form>
</div>
</body>
</html>

<!--/-->

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
</head>
<body>
<div style="color: red" th:if="${param.error}">
  Invalid email or password.
</div>
<div th:insert="~{fragment :: locale}"></div>
<form th:action="@{/login}" method="post">
  <!--        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">-->

  <label for="username"><span th:text="#{login.username}">Email:</span>
    <input id="username" type="text" name="username">
  </label><br>
  <label for="password"><span th:text="#{login.password}">Password:</span>
    <input id="password" type="password" name="password">
  </label><br>
  <button type="submit">Login</button>
</form>
<form action="/users/registration">
  <button type="submit">Registration</button>
</form>
</body>
</html>

<!--/-->

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Registration</title>
</head>
<body>
<form th:action="@{/users}" method="post" enctype="multipart/form-data" th:object="${user}">
  <label for="name">Name:
    <input id="name" type="text" name="name" th:value="*{name}"><!-- object -> ${user.name}-->
  </label><br>
  <label for="lastName">LastName:
    <input id="lastName" type="text" name="lastName" th:value="*{lastName}">
  </label><br>
  <label for="username">Email:
    <input id="username" type="text" name="username" th:value="*{username}">
  </label><br>
  <label for="birthDate">BirthDate:
    <input id="birthDate" type="date" name="birthDate" th:value="*{birthDate}">
  </label><br>
  <label for="password">Password:
    <input id="password" type="password" name="password" th:value="*{password}">
  </label><br>


  <div th:each="role : ${roles}">
    <input th:id="role" type="radio" name="role" th:value="${role}" th:checked="${role == user.role}">
    <label th:for="${role}" th:text="${role}">Role name</label>
  </div>
  <div th:each="gender : ${genders}">
    <input th:id="gender" type="radio" name="gender" th:value="${gender}" th:checked="${gender == user.gender}">
    <label th:for="${gender}" th:text="${gender}">Gender name</label>
  </div>

  <button type="submit">Registration</button>
</form>
<div th:if="${errors}">
  <p style="color: red" th:each="error : ${errors}" th:text="${error.defaultMessage}">Message</p>
</div>
</body>
</html>




<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Expenses</title>
  <link rel="stylesheet" href="/templates/old/index_expenses.css"/>

</head>
<body>
<div class="left-block">
  <div th:insert="~{fragment :: header}"></div>

  <form th:action="@{/expenses/upload}" th:object="${fileUpload}" method="post" enctype="multipart/form-data">
    <input type="file" name="file" th:field="*{multipartFile}">
    <button type="submit" value="Upload">Upload</button>

    <div th:if="${fileExpensesUpload != null}" class="message">
      <p th:text="${fileExpensesUpload}">Message</p>
    </div>
    <div th:if="${errorFile != null}" class="error">
      <p th:text="${errorFile}">Errors</p>
    </div>
  </form>

  <form th:action="@{/expenses/filter}" method="post" th:object="${expensesSessionFilter}">

    <div class="form-group">
      <label>fromDate</label>
      <input type="datetime-local" th:field="*{fromDate}">
      <div th:if="${#fields.hasErrors('fromDate')}" class="error">
        <span th:each="err : ${#fields.errors('fromDate')}" th:text="${err}"></span>
      </div>
    </div>

    <div class="form-group">
      <label>toDate</label>
      <input type="datetime-local" th:field="*{toDate}">
      <div th:if="${#fields.hasErrors('toDate')}" class="error">
        <span th:each="err : ${#fields.errors('toDate')}" th:text="${err}"></span>
      </div>
    </div>

    <div class="form-group">
      <label>fromSum</label>
      <input type="number" th:field="*{fromSum}">
      <div th:if="${#fields.hasErrors('fromSum')}" class="error">
        <span th:each="err : ${#fields.errors('fromSum')}" th:text="${err}"></span>
      </div>
    </div>

    <div class="form-group">
      <label>toSum</label>
      <input type="number" th:field="*{toSum}">
      <div th:if="${#fields.hasErrors('toSum')}" class="error">
        <span th:each="err : ${#fields.errors('toSum')}" th:text="${err}"></span>
      </div>
    </div>

    <div class="form-group">
      <label>CurrencyOperations:</label>
      <div class="h-list">
        <div th:each="curOper : ${selectedCurrencyOperations}" class="h-item">
          <label>
            <input type="checkbox"
                   th:value="${curOper.id}"
                   th:field="*{currencyOperations}">
            <span th:text="${curOper.name}"></span>
          </label>
        </div>
      </div>
    </div>


    <div class="form-group">
      <label>Categories:</label>
      <div class="h-list">
        <div th:each="cat : ${selectedCategories}" class="h-item">
          <label>
            <input type="checkbox"
                   th:value="${cat.id}"
                   th:field="*{categories}">
            <span th:text="${cat.name}"></span>
          </label>
        </div>
      </div>
    </div>


    <div class="form-group">
      <label>Descriptions:</label>
      <div class="h-list">
        <div th:each="desc : ${selectedDescriptions}" class="h-item">
          <label>
            <input type="checkbox"
                   th:value="${desc.id}"
                   th:field="*{descriptions}">
            <span th:text="${desc.name}"></span>
          </label>
        </div>
      </div>
    </div>


    <div class="form-group">
      <label>Users:</label>
      <div class="h-list">
        <div th:each="user : ${selectedUsers}" class="h-item">
          <label>
            <input type="checkbox"
                   th:value="${user.id}"
                   th:field="*{users}">
            <span th:text="${user.username}"></span>
          </label>
        </div>
      </div>
    </div>
    <button onclick="selectAll(this)">Select all</button>
    <button type="submit">Filter</button>
    <button type="submit" formaction="/expenses/filter/reset">Clear filter</button>
  </form>

  <div th:if="${errors}">
    <p style="color: red" th:each="error : ${errors}" th:text="${error.defaultMessage}">Message</p>
  </div>

</div>


<div class="th, td">
  <div class="right-content">
    <div class="table" th:if="${expensesi != null}">
      <h3>Expenses</h3>
      <table>
        <thead>
        <tr>
          <th>id</th>
          <th th:each="column : ${columnsExpenses}" th:text="${column.name}">date</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="expenses : ${expensesi}">
          <td th:text="${expenses.id}">id</td>
          <td th:text="${expenses.date}">date</td>
          <td th:text="${expenses.sum}">sum</td>
          <td th:text="${expenses.currencyOperations.name}">currency operations</td>
          <td th:text="${expenses.categories.name}">categories</td>
          <td th:text="${expenses.descriptions.name}">descriptions</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<script src="/static/js/script_expenses.js"></script>

</body>
</html>